TRAIN DATA ì— ìˆëŠ” ê¸°ìƒ ì»¬ëŸ¼
ê¸°ì˜¨, ê°•ìˆ˜ëŸ‰, í’ì†, í’í–¥, ìŠµë„

[ì‚¬ìš©ì]
  â†“ HTML ë²„íŠ¼ í´ë¦­
[Flask ì›¹ ì„œë²„ (Python)]
  â†“
  1. ê¸°ìƒì²­ APIë¡œ ì‹¤ì‹œê°„ ë‚ ì”¨ ë°ì´í„° ìˆ˜ì§‘
  2. ê±´ë¬¼ ì •ë³´ + ë‚ ì”¨ ë°ì´í„°ë¡œ test ìƒì„±
  3. í•™ìŠµëœ ëª¨ë¸ë¡œ ì˜ˆì¸¡ ìˆ˜í–‰
  â†“
[ê²°ê³¼ â†’ HTMLë¡œ ë³´ì—¬ì¤Œ]


------------------------------------------------
âœ… ê°„ë‹¨í•œ ì˜ˆì‹œ ì½”ë“œ (Flask ê¸°ì¤€)
*********** 1. app.py (Flask ì„œë²„)
python
ë³µì‚¬
í¸ì§‘
from flask import Flask, render_template, request
import requests
import joblib
import pandas as pd

app = Flask(__name__)

# ëª¨ë¸ ë¶ˆëŸ¬ì˜¤ê¸°
model = joblib.load('fire_predict_model.pkl')  # ì‚¬ì „ì— í•™ìŠµëœ ëª¨ë¸

@app.route('/')
def index():
    return render_template('index.html')

@app.route('/predict', methods=['POST'])
def predict():
    # ê¸°ìƒì²­ API í˜¸ì¶œ (ê°„ë‹¨í™” ì˜ˆì‹œ)
    tmprt, humidity, rain, ws, wd = get_weather_data()

    # ì˜ˆì¸¡ìš© ë°ì´í„° ìƒì„± (ì˜ˆ: ì‚¬ìš©ì ì…ë ¥ + ì‹¤ì‹œê°„ ë‚ ì”¨)
    test_row = {
        'buld_strctr': 2,
        'spt_lfdau_dist': 0.83,
        'bottom_area': 120.5,
        'TIME_UNIT_TMPRT': tmprt,
        'TIME_UNIT_HUMIDITY': humidity,
        'TIME_UNIT_RAINQTY': rain,
        'TIME_UNIT_WS': ws,
        'TIME_UNIT_WD': wd
    }
    X_test = pd.DataFrame([test_row])

    # ì˜ˆì¸¡
    pred = model.predict(X_test)[0]
    return render_template('result.html', prediction=pred)

def get_weather_data():
    # ì‹¤ì‹œê°„ ë‚ ì”¨ API í˜¸ì¶œí•´ì„œ ê°’ ë°˜í™˜ (T1H, REH ë“±)
    # ì—¬ê¸°ëŠ” ê¸°ìƒì²­ API í˜¸ì¶œ ì½”ë“œ ë“¤ì–´ê°
    return 28.5, 55, 0.0, 3.2, 200  # ì˜ˆì‹œ ë°ì´í„°

if __name__ == '__main__':
    app.run(debug=True)
--------------------------------------------------------------------
**********2. templates/index.html

<!DOCTYPE html>
<html>
<head>
    <title>í™”ì¬ ì˜ˆì¸¡</title>
</head>
<body>
    <h2>ê±´ë¬¼ í™”ì¬ ì˜ˆì¸¡ (ì‹¤ì‹œê°„ ë‚ ì”¨ ê¸°ë°˜)</h2>
    <form method="POST" action="/predict">
        <button type="submit">ì˜ˆì¸¡ ì‹¤í–‰</button>
    </form>
</body>
</html>
---------------------------------------------------------------
 ************3. templates/result.html

<!DOCTYPE html>
<html>
<head>
    <title>ì˜ˆì¸¡ ê²°ê³¼</title>
</head>
<body>
    <h3>ì˜ˆì¸¡ ê²°ê³¼: {{ prediction }}</h3>
    <a href="/">ì²˜ìŒìœ¼ë¡œ</a>
</body>
</html>

--------------------------------------------------------------
âœ… ì „ì²´ êµ¬ì„± ìš”ì•½
HTMLì—ì„œ ì§€ë„ë¥¼ í‘œì‹œ (Leaflet.js or Kakao Map ë“±)

ì‚¬ìš©ìê°€ ê±´ë¬¼ ìœ„ì¹˜ í´ë¦­ â†’ ìœ„ë„, ê²½ë„ ì¶”ì¶œ

JSë¡œ ìœ„ê²½ë„ë¥¼ Flask ì„œë²„ì— ì „ë‹¬ (fetch or form)

Flaskê°€ ê¸°ìƒì²­ API í˜¸ì¶œ (ê²©ì ë³€í™˜ + ë‚ ì”¨ ìˆ˜ì§‘)

í•´ë‹¹ ìœ„ì¹˜ì˜ ë‚ ì”¨ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì˜ˆì¸¡ ì‹¤í–‰

ê²°ê³¼ë¥¼ HTMLë¡œ ë°˜í™˜

-----------------------------------------------

âœ… í•µì‹¬ êµ¬ì„± ì˜ˆì‹œ
ğŸ”¹ 1. index.html (ì§€ë„ í¬í•¨)
html
ë³µì‚¬
í¸ì§‘
<!DOCTYPE html>
<html>
<head>
  <title>ê±´ë¬¼ ìœ„ì¹˜ ì„ íƒ</title>
  <meta charset="utf-8" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"/>
  <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>
</head>
<body>
  <h3>ê±´ë¬¼ ìœ„ì¹˜ë¥¼ ì§€ë„ì—ì„œ í´ë¦­í•˜ì„¸ìš”</h3>
  <div id="map" style="height: 400px;"></div>

  <form method="POST" action="/predict">
    <input type="hidden" name="lat" id="lat">
    <input type="hidden" name="lon" id="lon">
    <button type="submit">ì˜ˆì¸¡ ì‹¤í–‰</button>
  </form>

  <script>
    var map = L.map('map').setView([37.4979, 127.0276], 13);  // ì„œìš¸ ê°•ë‚¨ ê¸°ì¤€

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19,
    }).addTo(map);

    map.on('click', function(e) {
      document.getElementById('lat').value = e.latlng.lat;
      document.getElementById('lon').value = e.latlng.lng;
      alert(`ìœ„ì¹˜ ì„ íƒë¨: ${e.latlng.lat}, ${e.latlng.lng}`);
    });
  </script>
</body>
</html>

-------------------------------------------------------------

 2. app.py (Flask ì„œë²„)
python
ë³µì‚¬
í¸ì§‘
from flask import Flask, render_template, request
import joblib
import pandas as pd

app = Flask(__name__)

@app.route('/')
def index():
    return render_template('index.html')

@app.route('/predict', methods=['POST'])
def predict():
    lat = float(request.form['lat'])
    lon = float(request.form['lon'])

    # 1. ìœ„ê²½ë„ â†’ ê¸°ìƒì²­ ê²©ì ë³€í™˜
    nx, ny = convert_to_grid(lat, lon)

    # 2. ê¸°ìƒì²­ API í˜¸ì¶œ
    tmprt, humid, rain, ws, wd = get_weather(nx, ny)

    # 3. ì˜ˆì¸¡ìš© ë°ì´í„° ìƒì„±
    test_row = {
        'buld_strctr': 2,
        'spt_lfdau_dist': 0.83,
        'bottom_area': 120.5,
        'TIME_UNIT_TMPRT': tmprt,
        'TIME_UNIT_HUMIDITY': humid,
        'TIME_UNIT_RAINQTY': rain,
        'TIME_UNIT_WS': ws,
        'TIME_UNIT_WD': wd
    }
    X_test = pd.DataFrame([test_row])

    model = joblib.load('fire_model.pkl')
    pred = model.predict(X_test)[0]

    return f"ì˜ˆì¸¡ ê²°ê³¼: {pred}"

# ìœ„ê²½ë„ â†’ ê¸°ìƒì²­ ê²©ì ë³€í™˜ í•¨ìˆ˜
def convert_to_grid(lat, lon):
    import math
    # ... ê¸°ìƒì²­ ê³µì‹ ë³€í™˜ ì•Œê³ ë¦¬ì¦˜ (ìƒëµ ê°€ëŠ¥ â€” í•„ìš” ì‹œ ì œê³µ ê°€ëŠ¥)
    return 60, 127  # ì˜ˆì‹œ: ì„œìš¸ ê°•ë‚¨ ê²©ì

def get_weather(nx, ny):
    # ... ê¸°ìƒì²­ API ìš”ì²­ & parsing
    return 27.3, 60, 0.0, 2.1, 180  # ì˜ˆì‹œ ë°ì´í„°

if __name__ == '__main__':
    app.run(debug=True)
